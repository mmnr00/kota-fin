a=["910603105390",
"671117105138",
"631202107182",
"801207145208",
"750611105526",
"710905105058",
"780625145390",
"960820146354",
"790626145244",
"690308105580",
"940827105012",
"700616045248",
"700109715040",
"611122015896",
"780121016974",
"711111075314",
"700902106718",
"811212085624",
"860926295472",
"741219045448",
"740503105474",
"850609086010",
"671121105026",
"910525115808",
"811203115174",
"920617106190",
"860222105028",
"860113015592",
"960930105174",
"790405115164",
"750904086074",
"810524105386",
"780817045140",
"680412065428",
"800107085506",
"771202105456",
"890811085130",
"960605106296",
"881030115240",
"720909105038",
"740505085112",
"691126105576",
"630918045410",
"581113105182",
"611128106756",
"640825106332",
"660210105040",
"850210145410",
"840411105520",
"841009085968",
"810531105368",
"820221016318",
"760717035502",
"720425086774",
"660505015229",
"560418106044",
"620401105928",
"660314105088",
"591114086322",
"741231145206",
"661130105176",
"741109016718",
"020828100246",
"950613145448"]

b={}
a.each do |k|
t=Tchdetail.where(ic_1: k[0..5],ic_2: k[6..7],ic_3: k[8..20], anis: "true").first


if (tl=t.tchdetail_colleges.where(tp:"an1")).count > 1
tl.last.destroy
end

if (tl=t.tchdetail_colleges.where(tp:"an2")).count > 1
tl.last.destroy
end

if t.colleges.count > 2
b[t.name] = t.colleges.ids
end

if (tl=t.tchdetail_colleges.where(tp:"an2")).blank?
b[t.name] = t.colleges.ids
TchdetailCollege.create(tchdetail_id: t.id, college_id: 65, tp: "an2")
else
tll = tl.last
tll.college_id = 65
tll.save
end

end
b

c={}
d=[]
College.find(65).tchdetails.each do |tc|

ic = tc.ic_1 + tc.ic_2 + tc.ic_3
d<<ic
if !a.include?(ic)
c[tc.name] = ic
tcl=tc.tchdetail_colleges.where(college_id: 65).last
tcl.college_id = 64
tcl.save
end

end

a-d



