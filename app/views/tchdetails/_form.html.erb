<div class='row'>
  <div class='col-lg-8 col-12'>
    <%= form_for(@tchdetail, :html => {multipart: true, class: "form-horizontal", role: "form"}) do |f| %>
        
        <div class="form-group"> <!-- name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :name, class: "form-control", placeholder: "YOUR FULL NAME AS PER IC", autofocus: true, required: true %>
            </div>
          </div>
        </div>
        <% k = 1 %>
        <div class="form-group"> <!-- IC -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>I/C NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_1, maxlength: 6 ,class: "form-control", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-2 col-3">
             <%= f.text_field :ic_2, maxlength: 2, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div> <strong>-</strong>
            <div class="col-sm-3 col-4">
              <%= f.text_field :ic_3, maxlength: 4, class: "form-control", placeholder: "", autofocus: true, required: true %>
            </div>         
          </div>
        </div>

        <!-- GENDER -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> GENDER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :gender, options_for_select(["MALE",
                                                        "FEMALE"],
                                                        selected: @tchdetail.gender),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <!-- DOB -->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>DATE OF BIRTH</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.date_select :dob, 
                                {order:[:day, :month, :year],
                                prompt: { day: 'DAY', month: 'MONTH', year: 'YEAR' },
                                start_year: 1950,
                                selected: @tchdetail.dob}, 
                                {required: true} %>
            </div>
          </div>
        </div>

        <!-- HOUSEHOLD INCOME-->
        <div class="form-group"> 
          <div class="row">
            <div class="control-label col-sm-8">
              <i class="fas fa-caret-down"></i><strong> MONTHLY HOUSEHOLD INCOME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :income, options_for_select(["RM10,001 and above", 
                                                        "RM5,001 to RM10,000", 
                                                        "RM5,000 and below",
                                                        "Others"],
                                                        selected: @tchdetail.income),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- PHONE-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>PHONE NUMBER</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-3">
             <%= f.text_field  :phone_1, maxlength: 3, class: "form-control", autofocus: true, required: true %><font size="2"> Area </font> 
            </div>
            -
            <div class="col-sm-3 col-5">
              <%= f.text_field  :phone_2, maxlength: 8, class: "form-control", autofocus: true, required: true %><font size="2"> Phone Number </font> 
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- MARITAL-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong><%= f.label :"Marital Status" %></strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :marital, options_for_select(["Married", 
                                                        "Single",
                                                        "Others"],
                                                        selected: @tchdetail.marital),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>MARITAL STATUS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :category, options_for_select(["Childcare Provider", 
                                                        "Owner", 
                                                        "Supervisor",
                                                        "Others"],
                                                        selected: @tchdetail.category),
              {include_blank: "Please Select"}, {required: true} %>          
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- ADDRESS-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>ADDRESS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_1, class: "form-control", autofocus: true, required: true %> <font size="2"> &nbsp </font>
            </div>
            <div class="col-sm-8 col-12">
             <%= f.text_field :address_2, class: "form-control", autofocus: true %> <font size="2"> &nbsp </font>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-6">
             <%= f.text_field :city, class: "form-control", autofocus: true, required: true %> <font size="2"> City </font>
            </div>
            <div class="col-sm-3 col-5">
             <%= f.text_field :states, class: "form-control", autofocus: true, required: true %> <font size="2"> States </font>
            </div>
            <div class="col-sm-2 col-4">
             <%= f.number_field :postcode, class: "form-control", autofocus: true, required: true %> <font size="2"> Postcode </font>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- HIGHEST EDUCATION-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>EDUCATION LEVEL</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-8">
              <%= f.select :education, options_for_select(["PHD", 
                                                        "Master", 
                                                        "Degree",
                                                        "Diploma/STPM",
                                                        "SPM/SPMV/MCE/O-Level",
                                                        "Sijil Kemahiran",
                                                        "Others"
                                                        ], 
                                                        selected: @tchdetail.education), 
              {include_blank: "Please Select"}, {required: true} %>
              <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
            </div>
          </div>
        </div>

        <!-- START PHOTO UPLOAD -->
        <!-- IC FRONT -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>IC FRONT</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "IC FRONT").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "IC FRONT" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

       <!-- IC BACK -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>IC BACK</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "IC BACK").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "IC BACK" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
        <% end %>
        </div>
        </div>
      </div>

      <!-- PROFILE PIC -->
      <% m = 0 %> <!-- Stop loop at 1 -->
      <div class="form-group"> 
        <div class="row">
          <div class="control-label col-sm-8">
            <strong>PROFILE PIC</strong>
          </div>
        </div>
        <div class="row">
        <div class="col-sm-8 col-5">
        <% image = @tchdetail.fotos.where(foto_name: "PROFILE PIC").first %>
        <% if image.present? %>
          <%= image_tag(image.picture.url, size: "200x200") if image.picture? %>
            <div class="row">
            <div class="col-sm-8 col-5">
              <strong><%= link_to "EDIT", edit_foto_path(image.id), class: "btn btn-sm btn-success active" %></strong>
            </div>
            </div>  
        <% else %>
          <%= f.fields_for :fotos do |h| %>
            <% break if m==1 %>
              <div class="row">
                <div class="col-sm-8 col-8">
                  <%= h.hidden_field :foto_name, value: "PROFILE PIC" %>
                  <%= h.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
                </div>
              </div>
              <% m = 1 %>
            <% end %>
          <% end %>
        </div>
        </div>
      </div>

      <!-- ANIS ONLY -->
      <% if params[:anis] == "true" %>
        <!-- TASKA DETAILS -->
        <div class="form-group"> <!-- taska name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>TASKA/PJKK NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :ts_name, class: "form-control", autofocus: true %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- taska owner name -->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>TASKA/PJKK OWNER'S NAME</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
              <%= f.text_field :ts_owner_name, class: "form-control", autofocus: true %>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- Taska Owner PHONE-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>TASKA/PJKK OWNER'S NAME PHONE NO</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-2 col-3">
             <%= f.text_field  :ts_phone_1, maxlength: 3, class: "form-control", autofocus: true %><font size="2"> Area </font> 
            </div>
            -
            <div class="col-sm-3 col-5">
              <%= f.text_field  :ts_phone_2, maxlength: 8, class: "form-control", autofocus: true %><font size="2"> Phone Number </font> 
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- TASKA ADDRESS-->
          <div class="row">
            <div class="control-label col-sm-8">
              <strong>TASKA/PJKK ADDRESS</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8 col-12">
             <%= f.text_field :ts_address_1, class: "form-control", autofocus: true %> <font size="2"> Address Line 1 </font>
            </div>
            <div class="col-sm-8 col-12">
             <%= f.text_field :ts_address_2, class: "form-control", autofocus: true %> <font size="2"> Address Line 2 </font>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3 col-6">
             <%= f.text_field :ts_city, class: "form-control", autofocus: true %> <font size="2"> City </font>
            </div>
            <div class="col-sm-3 col-5">
             <%= f.text_field :ts_states, class: "form-control", autofocus: true %> <font size="2"> States </font>
            </div>
            <div class="col-sm-2 col-4">
             <%= f.number_field :ts_postcode, class: "form-control", autofocus: true %> <font size="2"> Postcode </font>
            </div>
          </div>
        </div>

        <div class="form-group"> <!-- DUN -->
            <div class="row">
              <div class="control-label col-sm-8">
                <strong>DUN</strong>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-8 col-8">
                <%= f.select :dun, options_for_select(["  Sungai Air Tawar  " ,
                                                      " Sabak " ,
                                                      " Sungai Panjang  " ,
                                                      " Sekinchan " ,
                                                      " Hulu Bernam " ,
                                                      " Kuala Kubu Baharu " ,
                                                      " Batang Kali " ,
                                                      " Sungai Burong " ,
                                                      " Permatang " ,
                                                      " Bukit Melawati  " ,
                                                      " Ijok  " ,
                                                      " Jeram " ,
                                                      " Kuang " ,
                                                      " Rawang  " ,
                                                      " Taman Templer " ,
                                                      " Sungai Tua  " ,
                                                      " Gombak Setia  " ,
                                                      " Hulu Kelang " ,
                                                      "   Bukit Antarabangsa  " ,
                                                      " Lembah Jaya " ,
                                                      " Pandan Indah  " ,
                                                      " Teratai " ,
                                                      " Dusun Tua " ,
                                                      " Semenyih  " ,
                                                      " Kajang  " ,
                                                      " Sungai Ramal  " ,
                                                      " Balakong  " ,
                                                      " Seri Kembangan  " ,
                                                      " Seri Serdang  " ,
                                                      " Kinrara " ,
                                                      " Subang Jaya " ,
                                                      " Seri Setia  " ,
                                                      " Taman Medan " ,
                                                      " Bukit Gasing  " ,
                                                      " Kampung Tunku " ,
                                                      " Bandar Utama  " ,
                                                      " Bukit Lanjan  " ,
                                                      " Paya Jaras  " ,
                                                      " Kota Damansara  " ,
                                                      " Kota Anggerik " ,
                                                      " Batu Tiga " ,
                                                      " Meru  " ,
                                                      " Sementa " ,
                                                      " Selat Klang " ,
                                                      " Bandar Baru Klang " ,
                                                      " Pelabuhan Klang " ,
                                                      " Pandamaran  " ,
                                                      " Sentosa " ,
                                                      " Sungai Kandis " ,
                                                      " Kota Kemuning " ,
                                                      " Sijangkang  " ,
                                                      " Banting " ,
                                                      " Morib " ,
                                                      " Tanjong Sepat " ,
                                                      " Dengkil " ,
                                                      " Sungai Pelek  " ,
                                                      ], 
                                                      selected: @tchdetail.dun), 
                {include_blank: "Please Select"} %>
                <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
              </div>
            </div>
          </div>

        
          <div class="form-group"> <!-- JKM -->
            <div class="row">
              <div class="control-label col-sm-8">
                <strong>NO PERAKUAN JKM/JPN</strong>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-8 col-12">
                <%= f.text_field :jkm, class: "form-control", placeholder: "", autofocus: true %>
              </div>
            </div>
          </div>

          <div class="form-group"> <!-- POST -->
            <div class="row">
              <div class="control-label col-sm-8">
                <strong>POST IN TASKA</strong>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-8 col-8">
                <%= f.select :post, options_for_select(["OWNER",
                                                        "SUPERVISOR/MANAGER",
                                                        "CHILDCARE PROVIDER"
                                                          ], 
                                                          selected: @tchdetail.post), 
                {include_blank: "Please Select"} %>
                <%= f.hidden_field :teacher_id, value: params[:teacher_id] %>
              </div>
            </div>
          </div>
          <%= f.hidden_field :anis, value: params[:anis] %>
        <% end %>
      

      <%= f.hidden_field :college_id, value: params[:id] %>
      

              
        <div class="form-group">
          <div class="row">
            <div class="col-sm-offset-2 col-sm-10 col-4">
              <%= f.submit :"UPDATE PROFILE",  class: 'btn btn-primary btn-lg' %>
            </div>
          </div>
        </div>
      <% end %>
      
    </div>
  </div>